{% extends "admin_layout.html" %}

{% block title %}Tags{% endblock %}

{% block page_title %}
    Gestión de Tags
{% endblock %}

{% block content %}
    
    <div class="admin-main" style="margin-bottom: 2rem;">
        <h3>Crear Nuevo Tag</h3>
        <form class="admin-form" method="POST" action="{{ url_for('admin_bp.admin_crear_tag') }}" style="max-width: none; margin: 0; display: flex; gap: 1rem; align-items: flex-end;">
            
            <div class="form-group" style="margin-bottom: 0; flex: 1;">
                <label for="nombre_tag">Nombre del Tag</label>
                <input type="text" id="nombre_tag" name="nombre_tag" required>
            </div>
            
            <div class="form-actions" style="margin-bottom: 0;">
                <button type="submit" class="btn btn-primary">
                    <span class="material-symbols-outlined">add_circle</span>
                    Crear
                </button>
            </div>

        </form>
    </div>

    <div class="admin-main">
        <h3>Tags Existentes</h3>
        <table class="admin-table">
            <thead>
                <tr>
                    <th>Nombre del Tag</th>
                    <th style="width: 220px;">Acciones</th>
                </tr>
            </thead>
            <tbody>
                
                {% for tag in tags %}
                <tr>
                    <td><strong>#{{ tag.name }}</strong></td>
                    <td>
                    <a href="{{ url_for('admin_bp.admin_editar_tag_ruta', tag_id_str=tag._id) }}" class="btn btn-secondary">
                        <span class="material-symbols-outlined">edit</span>
                        Editar
                    </a>
                        
                    <form action="{{ url_for('admin_bp.admin_eliminar_tag_ruta', tag_id_str=tag._id) }}" method="POST" onsubmit="return confirm('¿Seguro que quieres eliminar este tag?\n\n#{{ tag.name }}\n\n(Se quitará de TODOS los artículos que lo usen)');" style="display: inline-block;">
                        <button type="submit" class="btn btn-danger">
                            <span class="material-symbols-outlined">delete</span>
                        </button>
                    </form>
                    </td>
                </tr>
                
                {% else %}
                <tr>
                    <td colspan="2" style="text-align: center; padding: 2rem;">
                        No hay tags. ¡Crea uno arriba!
                    </td>
                </tr>
                {% endfor %}

            </tbody>
        </table>
    </div>

{% endblock %}